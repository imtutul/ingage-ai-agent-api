# Streamlit Demo Chat App

This is a simple and elegant Streamlit web application that provides a clean chat interface for interacting with Microsoft Fabric Data Agents.

## Features

- ü§ñ **Clean Chat Interface**: Modern, responsive chat UI with message history
- ‚öôÔ∏è **Configuration Sidebar**: Easy setup for Tenant ID and Data Agent URL
- üîê **Azure Authentication**: Secure authentication flow with Azure AD
- üìä **Session Statistics**: Track questions asked and success rate
- üí° **Quick Start Questions**: Pre-defined sample questions to get started
- üîç **SQL Query Viewing**: Optional detailed mode to see generated SQL queries
- üìà **Data Previews**: View actual data results when SQL queries are executed
- üé® **Elegant Styling**: Professional appearance with proper color coding

## Quick Start

1. **Install dependencies**:
   ```bash
   pip install streamlit
   ```

2. **Run the app**:
   ```bash
   streamlit run demo_chat_app.py
   ```

3. **Configure in the sidebar**:
   - Enter your Azure Tenant ID
   - Enter your Data Agent URL
   - Click "Connect"

4. **Start chatting**:
   - Use sample questions or type your own
   - Enable "Show SQL" to see the generated queries
   - View your chat history with timestamps

## Configuration Options

### Environment Variables (Optional)
You can set these environment variables to pre-populate the configuration:
- `TENANT_ID`: Your Azure Active Directory tenant ID
- `DATA_AGENT_URL`: Your published Fabric Data Agent URL

### Streamlit Secrets (Optional)
For deployment, you can also use Streamlit secrets by creating a `.streamlit/secrets.toml` file:
```toml
TENANT_ID = "your-tenant-id"
DATA_AGENT_URL = "your-data-agent-url"
```

## Features Overview

### Chat Interface
- **Message History**: All questions and responses are maintained during the session
- **Response Time Tracking**: See how long each query takes to process
- **Error Handling**: Clear error messages when something goes wrong
- **Timestamps**: Each message shows when it was sent

### Configuration Management
- **Secure Input**: Tenant ID is masked for security
- **URL Validation**: Proper handling of long Data Agent URLs
- **Connection Status**: Clear visual indicators of connection state
- **Session Management**: Easy reconnection and chat clearing options

### Data Exploration
- **SQL Query Display**: See the actual SQL queries generated by the agent
- **Data Previews**: View sample data results from your queries
- **Markdown Tables**: Properly formatted data display
- **Query Analysis**: Understand how your questions are translated to SQL

## Architecture

The app is built using:
- **Streamlit**: Modern web app framework for Python
- **Fabric Data Agent Client**: Custom client library for Microsoft Fabric
- **Azure Identity**: Secure authentication with Azure AD
- **Custom CSS**: Professional styling and responsive design

## Deployment

For production deployment, consider:
1. Using Streamlit Cloud or other hosting platforms
2. Setting up proper secrets management
3. Configuring authentication flows
4. Setting up monitoring and logging

## Troubleshooting

### Common Issues

1. **Connection Errors**: Verify your Tenant ID and Data Agent URL are correct
2. **Authentication Failures**: Ensure you have proper permissions in Azure AD
3. **Import Errors**: Make sure all dependencies are installed
4. **Performance**: Install watchdog for better file watching: `pip install watchdog`

### Getting Help

- Check the main README.md for general client setup
- Verify your Data Agent is properly published in Fabric
- Ensure your Azure credentials have the necessary permissions

## Demo Flow

1. **Welcome Screen**: Shows when not connected
2. **Configuration**: Enter credentials in sidebar
3. **Authentication**: Automatic Azure AD login flow
4. **Chat Interface**: Clean messaging interface
5. **Sample Questions**: Quick start options
6. **Results Display**: Formatted responses with optional SQL details
7. **Session Management**: Track usage and manage chat history

This demo app showcases the capabilities of the Fabric Data Agent client in a user-friendly web interface suitable for demonstrations and quick data exploration.
